{"version":3,"sources":["../src/training.js"],"names":["define","$","cfg","log","courseid","blockid","quizlist","examquiz","rootcategory","training","init","cid","bid","rc","ql","exq","prop","bind","select_all_master_categories","update_selector_master_global","fetch_training_subcategories","addClass","fetch_exam_subcategories","debug","init_detail","that","regexp","matches","attr","match","categoryid","select_all_detail_categories","update_selector_detail","update_selector_master_ajax","parseInt","replace","params","url","M","wwwroot","get","data","html","length","mode","categorieslist","select_all_master_cb","each","catid","allchecked","parentid","currentclasses","className","split","i","refresh_selector","callback","proxy","reset_training","userid","alert","window","location","refresh_content","highlight_amf_cat","highlight_training_cat","removeClass","close_detail","css","post","localcatid","isNaN","animate","scrollTop","offset","top"],"mappings":"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","sourcesContent":["/**\n * This will only work for quizzes having :\n * - being customscripted as required\n * - having single question per page\n * - being linnked to an enabling userquiz_monitor panel.\n */\n// jshint undef:false, unused:false\n\ndefine(['jquery', 'core/config', 'core/log'], function($, cfg, log) {\n\n    var courseid;\n\n    var blockid;\n\n    var quizlist;\n\n    var examquiz;\n\n    var rootcategory;\n\n    var training = {\n        init: function(cid, bid, rc, ql, exq) {\n\n            courseid = cid;\n            blockid = bid;\n            rootcategory = rc;\n            quizlist = ql;\n            examquiz = exq;\n\n            $('.cb-master').prop('disabled', false); // Disabled while checking we have enough questions to process.\n            $('.cb-master').prop('checked', false); // Unchecked at start.\n            $('#checkall-master').prop('disabled', false); // Disabled while checking we have enough questions to process.\n            $('#checkall-master').prop('checked', false); // Unchecked at start.\n            $('#checkall-master').bind('change', this.select_all_master_categories);\n\n            // this is a call stack in order.\n            $('.cb-master').bind('click', this.update_selector_master_global);\n            $('.userquiz-monitor-cat-button').bind('click', this.fetch_training_subcategories);\n            $('.userquiz-monitor-cat-button').addClass('active');\n            $('.userquiz-monitor-exam-cat-button').bind('click', this.fetch_exam_subcategories);\n            $('.userquiz-monitor-exam-cat-button').addClass('active');\n\n            log.debug('AMD Block_userquiz_monitor quizforceanswer initialized');\n        },\n\n        /*\n         * this will be called later each time loading some subcategory content\n         * this usually should be triggered on an ajax loaded content, after ajax has been completed\n         * loading.\n         * Use this function by proxying on a main category related element\n         */\n        init_detail: function() {\n\n            var that = $(this);\n            var regexp  = /[^0-9]*([0-9]+)$/;\n            var matches = that.attr('id').match(regexp);\n            var categoryid = matches[1];\n\n            $('#id-checkall-detail-' + categoryid).prop('checked', false);\n            $('#id-checkall-detail-' + categoryid).bind('change', this.select_all_detail_categories);\n            $('.cb-detail-' + categoryid).prop('checked', false);\n            $('.cb-detail-' + categoryid).bind('click', this.update_selector_detail);\n            log.debug('AMD Block_userquiz_monitor detail ' + categoryid + ' initialized');\n        },\n\n        /**\n         * Updates the selector following the user's choice selecting or unselecting\n         * a category.\n         */\n        update_selector_master_ajax: function() {\n\n            var that = $(this);\n\n            // Try first from a selector checkbox.\n            var categoryid = parseInt(that.attr('id').replace('id-cb-master-', ''));\n            if (!categoryid) {\n                // Try if even not comes from the subcategory button.\n                categoryid = parseInt(that.attr('id').replace('details-button-', ''));\n            }\n\n            var params = \"courseid=\" + courseid + \"&rootcategory=\" + rootcategory + \"&categoryid=\" + categoryid;\n            params += \"&location=mode0&quizlist=\" + quizlist;\n            var url = M.cfg.wwwroot + '/blocks/userquiz_monitor/ajax/updateselector.php?' + params;\n\n            // If is checked, should check also all subcategories if visible.\n            if (that.prop('checked')) {\n                $('.cb-detail-' + categoryid).prop('checked', true);\n            }\n\n            $.get(url, function(data) {\n                $('.selectorcontainers').html(data);\n\n                // Enable Go Btn if there are question numbers.\n                if ($('#id-selector-nb-questions').length) {\n                    $('#id-training-go-button').prop('disabled', false);\n                } else {\n                    $('#id-training-go-button').prop('disabled', true);\n                }\n            }, 'html');\n        },\n\n        /**\n         * Updates the selector following the user's choice.\n         */\n        update_selector_master_global: function(mode) {\n\n            var categorieslist = '';\n\n            if (mode === 'all') {\n                this.select_all_master_cb();\n            }\n\n            $('.cb-master').each(function() {\n                if ($(this).prop('checked')) {\n                    var catid = $(this).attr('id').replace('id-cb-master-', '');\n                    if (categorieslist === '') {\n                        categorieslist = catid;\n                    } else {\n                        categorieslist = categorieslist + \",\" + catid;\n                    }\n                }\n            });\n\n            if (categorieslist === '') {\n                categorieslist = 'null';\n            }\n\n            var params = \"courseid=\" + courseid + \"&rootcategory=\" + rootcategory + \"&categoryid=\" + categorieslist;\n            params += \"&location=mode0&quizlist=\" + quizlist;\n            var url = M.cfg.wwwroot + '/blocks/userquiz_monitor/ajax/updateselector.php?' + params;\n\n            $.get(url, function(data) {\n                $('.selectorcontainers').html(data);\n\n                // Enable Go Btn if there are question numbers.\n                if ($('#id-selector-nb-questions').length) {\n                    $('#id-training-go-button').prop('disabled', false);\n                } else {\n                    $('#id-training-go-button').prop('disabled', true);\n                }\n            }, 'html');\n        },\n\n        /**\n         * Updates the selector following the user's choice.\n         */\n        update_selector_detail: function () {\n\n            log.debug(\"update_selector_detail\");\n\n            var categorieslist = '';\n            var allchecked = true;\n            var parentid = 0;\n\n            var currentclasses = this.className.split(' ');\n\n            for (var i in currentclasses) {\n                // Find the parent related class\n                if (currentclasses[i].match(/^cb-detail-/)) {\n                    parentid = currentclasses[i].replace('cb-detail-', '');\n                }\n            }\n\n            $('.cb-detail').each(function() {\n\n                var that = $(this);\n                var categoryid = that.attr('id').replace('id-cb-detail-', '');\n\n                if ($(this).prop('checked')) {\n                    if (categorieslist === '') {\n                        categorieslist = categoryid;\n                    } else {\n                        categorieslist = categorieslist + \",\" + categoryid;\n                    }\n                } else {\n                    allchecked = false;\n                }\n            });\n\n            // If not checked, uncheck the master category.\n            if (!allchecked && parentid) {\n                $('#id-cb-master-' + parentid).prop('checked', false);\n            }\n\n            if (categorieslist === '') {\n                categorieslist = \"null\";\n            }\n\n            var params = \"courseid=\" + courseid + \"&rootcategory=\" + rootcategory + \"&categoryid=\" + categorieslist;\n            params += \"&location=mode1&quizlist=\" + quizlist;\n            var url = cfg.wwwroot + '/blocks/userquiz_monitor/ajax/updateselector.php?' + params;\n\n            $.get(url, function(data) {\n                $('.selectorcontainers').html(data);\n\n                // Enable Go Btn if there are question numbers.\n                if ($('#id-selector-nb-questions').length) {\n                    $('#id-training-go-button').prop('disabled', false);\n                } else {\n                    $('#id-training-go-button').prop('disabled', true);\n                }\n            }, 'html');\n        },\n\n        /**\n         * Refresh the number of questions on the selector of the training dashbord\n         */\n        refresh_selector: function () {\n\n            var that = $(this);\n            var categoryid = that.attr('id').replace();\n\n            var params = \"rootcategory=\" + rootcategory + \"&categoryid=\" + categoryid + \"&quizzeslist=\" + quizlist;\n            var url = cfg.wwwroot + \"/blocks/userquiz_monitor/ajax/refreshselector.php?\" + params;\n\n            $.get(url, function(data) {\n                $('.selectorcontainers').html(data);\n\n                // Enable Go Btn if there   are question numbers.\n                if ($('#id-selector-nb-questions').length) {\n                    $('#id-training-go-button').prop('disabled', false);\n                } else {\n                    $('#id-training-go-button').prop('disabled', true);\n                }\n            }, 'html');\n        },\n\n        /*\n         * This will be attached to the single \"select all\" checkbox of a main group.\n         */\n        select_all_master_categories: function () {\n            if ($('#checkall-master').prop('checked')) {\n                $('.cb-master').prop('checked', true);\n            } else {\n                $('.cb-master').prop('checked', false);\n            }\n\n            training.update_selector_master_global();\n        },\n\n        /*\n         * This will be attached to each \"select all\" checkbox of a detail subcategory group.\n         */\n        select_all_detail_categories: function () {\n\n            var that = $(this);\n            var categoryid = that.attr('id').replace('id-checkall-detail-', '');\n\n            if (that.prop('checked')) {\n                $('.cb-detail-' + categoryid).prop('checked', true);\n            } else {\n                $('.cb-detail-' + categoryid).prop('checked', false);\n            }\n\n            var callback = $.proxy(training.update_selector_detail, this);\n            callback();\n        },\n\n        reset_training: function(userid) {\n\n            var params = \"id=\" + courseid + \"&userid=\" + userid + \"&quizzeslist=\" + quizlist;\n            var url = cfg.wwwroot + \"/blocks/userquiz_monitor/ajax/resettraining.php?\" + params;\n\n            $.get(url, function (data) {\n                alert(data);\n                window.location = cfg.wwwroot + \"/course/view.php?id=\" + courseid;\n            }, 'html');\n        },\n\n        /**\n         * Updates the program following the user's choice.\n         * Deprecated ?\n         */\n        refresh_content: function () {\n\n            var that = $(this);\n            var categoryid = that.attr('id').replace('', '');\n\n            var params = \"courseid=\" + courseid + \"&rootcategory=\" + rootcategory + \"&id=\" + categoryid;\n\n            var url = cfg.wwwroot + '/blocks/userquiz_monitor/ajax/schedulecontent.php?' + params;\n\n            $.get(url, function(data) {\n                $('#divschedule').html(data);\n                this.highlight_amf_cat(categoryid);\n            });\n        },\n\n        highlight_training_cat: function(categoryid) {\n            $('trainingcat').removeClass('active');\n            $('trainingcat').addClass('inactive');\n            for (var i = 0; i < 12; i++) {\n                if (i === categoryid) {\n                    $('#trainingcat' + i).removeClass('inactive');\n                    $('#trainingcat' + i).addClass('active');\n                }\n            }\n        },\n\n        close_detail: function() {\n\n            var that = $(this);\n\n            var categoryid = that.attr('id').replace('id-cancel-detail-', '');\n\n            $('#checkall-master').prop('checked', false);\n            $('#checkall-master').prop('disabled', false);\n            $('.cb-master').prop('checked', false);\n            $('.cb-master').prop('disabled', false);\n            $('.cb-master').addClass('trans100');\n            $('.cb-master').removeClass('trans50');\n            $('#id-detail-button-div-' + categoryid).addClass('active');\n            $('.progressbar-container').css('visibility', 'visible');\n            $('.category-subpod').css('display', 'none');\n            $('#category-subcatpod-' + categoryid).html('');\n\n            // Desinhibits all other master cats.\n            $('.cb-master').prop('disabled', false);\n            $('.div-main').removeClass('trans50');\n            $('.div-main').addClass('trans100');\n\n            var callback = $.proxy(training.update_selector_detail, this);\n            callback();\n        },\n\n        /**\n         * Display subcategories on the right part of the training dashbord. On narrow screens,\n         * will route the content to the special container under the category main block.\n         */\n        fetch_training_subcategories: function() {\n\n            var that = $(this);\n            var categoryid = that.attr('id').replace('details-button-div-', '');\n\n            var params = \"blockid=\" + blockid + \"&courseid=\" + courseid + \"&rootcategory=\" + rootcategory;\n            params += \"&categoryid=\" + categoryid + \"&quizzeslist=\" + quizlist + \"&mode=training\";\n            var url = cfg.wwwroot + \"/blocks/userquiz_monitor/ajax/subcategoriescontent.php?\" + params;\n\n            $.post(url, '', function(data) {\n                var localcatid;\n                if (isNaN(categoryid)) {\n                    localcatid = categoryid.replace('details-button-', '');\n                } else {\n                    localcatid = categoryid;\n                }\n\n                // Empty all subcategories.\n                $('.category-subpod').css('display', 'none');\n                $('#category-subcatpod-' + categoryid).html('');\n\n                // Setup category content.\n                $('#category-subcatpod-' + localcatid).html(data);\n                $('#category-subcatpod-' + localcatid).css('display', 'inline-block');\n                log.debug('AMD Block_userquiz_monitor detail ' + localcatid + ' loaded');\n\n                $('#id-checkall-detail-' + categoryid).prop('checked', false);\n                $('#id-checkall-detail-' + categoryid).bind('change', training.select_all_detail_categories);\n                if (!$('#id-cb-master-' + categoryid).prop('checked')) {\n                    $('#id-checkall-detail-' + categoryid).prop('checked', false);\n                    $('.cb-detail-' + categoryid).prop('checked', false);\n                } else {\n                    $('#id-checkall-detail-' + categoryid).prop('checked', true);\n                    $('.cb-detail-' + categoryid).prop('checked', true);\n                }\n                $('.cb-detail-' + categoryid).bind('click', training.update_selector_detail);\n                $('#id-cancel-detail-' + categoryid).bind('click', training.close_detail);\n                $('#id-detail-button-div-' + categoryid).removeClass('active');\n\n                // Inhibits all other master cats.\n                $('.cb-master').prop('disabled', true);\n                $('.cb-master').prop('checked', false);\n                $('.div-main').addClass('trans50');\n                $('.div-main').removeClass('trans100');\n                $('#cb-master-' + categoryid).prop('disabled', false);\n                $('#id-div-main-' + categoryid).removeClass('trans50');\n                $('#id-div-main-' + categoryid).addClass('trans100');\n\n                $('html,body').animate({scrollTop: $('#id-cat-' + categoryid).offset().top},'slow');\n\n                var callback = $.proxy(training.update_selector_detail, this);\n                callback();\n\n            }, 'html');\n        },\n\n        /**\n         * Display subcategories on the right part of the training dashbord. On narrow screens,\n         * will route the content to the special container under the category main block.\n         */\n        fetch_exam_subcategories: function() {\n\n            var that = $(this);\n            var categoryid = that.attr('id').replace('details-button-div-', '');\n\n            var params = \"blockid=\" + blockid + \"&courseid=\" + courseid + \"&rootcategory=\" + rootcategory;\n            params += \"&categoryid=\" + categoryid + \"&quizzeslist=\" + examquiz + \"&mode=exam\";\n            var url = cfg.wwwroot + \"/blocks/userquiz_monitor/ajax/subcategoriescontent.php?\" + params;\n\n            $.post(url, '', function(data) {\n                var localcatid;\n                if (isNaN(categoryid)) {\n                    localcatid = categoryid.replace('details-button-', '');\n                } else {\n                    localcatid = categoryid;\n                }\n\n                // Empty all subcategories.\n                $('.category-subpod').css('display', 'none');\n                $('#category-subcatpod-' + categoryid).html('');\n\n                // Setup category content.\n                $('#category-subcatpod-' + localcatid).html(data);\n                $('#category-subcatpod-' + localcatid).css('display', 'inline-block');\n                log.debug('AMD Block_userquiz_monitor detail ' + localcatid + ' loaded');\n\n                $('#id-cancel-detail-' + categoryid).bind('click', training.close_detail);\n                $('#id-detail-button-div-' + categoryid).removeClass('active');\n\n                // Inhibits all other master cats.\n                $('.div-main').addClass('trans50');\n                $('.div-main').removeClass('trans100');\n                $('#id-div-main-' + categoryid).removeClass('trans50');\n                $('#id-div-main-' + categoryid).addClass('trans100');\n\n                $('html,body').animate({scrollTop: $('#id-cat-' + categoryid).offset().top},'slow');\n\n            }, 'html');\n        }\n\n    };\n\n    return training;\n});\n\n\n"],"file":"training.min.js"}