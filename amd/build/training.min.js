define ("block_userquiz_monitor/training",["jquery","core/config","core/log"],function(a,b,c){var d,e,f,g,h,i={init:function init(b,i,j,k,l){d=b;e=i;h=j;f=k;g=l;a(".cb-master").prop("disabled",!1);a(".cb-master").prop("checked",!1);a("#checkall-master").prop("disabled",!1);a("#checkall-master").prop("checked",!1);a("#checkall-master").bind("change",this.select_all_master_categories);a(".cb-master").bind("click",this.update_selector_master_global);a(".userquiz-monitor-cat-button").bind("click",this.fetch_training_subcategories);a(".userquiz-monitor-cat-button").addClass("active");a(".userquiz-monitor-exam-cat-button").bind("click",this.fetch_exam_subcategories);a(".userquiz-monitor-exam-cat-button").addClass("active");c.debug("AMD Block_userquiz_monitor quizforceanswer initialized")},init_detail:function init_detail(){var b=a(this),d=b.attr("id").match(/[^0-9]*([0-9]+)$/),e=d[1];a("#id-checkall-detail-"+e).prop("checked",!1);a("#id-checkall-detail-"+e).bind("change",this.select_all_detail_categories);a(".cb-detail-"+e).prop("checked",!1);a(".cb-detail-"+e).bind("click",this.update_selector_detail);c.debug("AMD Block_userquiz_monitor detail "+e+" initialized")},update_selector_master_ajax:function update_selector_master_ajax(){var b=a(this),c=parseInt(b.attr("id").replace("id-cb-master-",""));if(!c){c=parseInt(b.attr("id").replace("details-button-",""))}var e="courseid="+d+"&rootcategory="+h+"&categoryid="+c;e+="&location=mode0&quizlist="+f;var g=M.cfg.wwwroot+"/blocks/userquiz_monitor/ajax/updateselector.php?"+e;if(b.prop("checked")){a(".cb-detail-"+c).prop("checked",!0)}a.get(g,function(b){a(".selectorcontainers").html(b);if(a("#id-selector-nb-questions").length){a("#id-training-go-button").prop("disabled",!1)}else{a("#id-training-go-button").prop("disabled",!0)}},"html")},update_selector_master_global:function update_selector_master_global(b){var c="";if("all"===b){this.select_all_master_cb()}a(".cb-master").each(function(){if(a(this).prop("checked")){var b=a(this).attr("id").replace("id-cb-master-","");if(""===c){c=b}else{c=c+","+b}}});if(""===c){c="null"}var e="courseid="+d+"&rootcategory="+h+"&categoryid="+c;e+="&location=mode0&quizlist="+f;var g=M.cfg.wwwroot+"/blocks/userquiz_monitor/ajax/updateselector.php?"+e;a.get(g,function(b){a(".selectorcontainers").html(b);if(a("#id-selector-nb-questions").length){a("#id-training-go-button").prop("disabled",!1)}else{a("#id-training-go-button").prop("disabled",!0)}},"html")},update_selector_detail:function update_selector_detail(){c.debug("update_selector_detail");var e="",g=!0,j=0,k=this.className.split(" ");for(var l in k){if(k[l].match(/^cb-detail-/)){j=k[l].replace("cb-detail-","")}}a(".cb-detail").each(function(){var b=a(this),c=b.attr("id").replace("id-cb-detail-","");if(a(this).prop("checked")){if(""===e){e=c}else{e=e+","+c}}else{g=!1}});if(!g&&j){a("#id-cb-master-"+j).prop("checked",!1)}if(""===e){e="null"}var i="courseid="+d+"&rootcategory="+h+"&categoryid="+e;i+="&location=mode1&quizlist="+f;var m=b.wwwroot+"/blocks/userquiz_monitor/ajax/updateselector.php?"+i;a.get(m,function(b){a(".selectorcontainers").html(b);if(a("#id-selector-nb-questions").length){a("#id-training-go-button").prop("disabled",!1)}else{a("#id-training-go-button").prop("disabled",!0)}},"html")},refresh_selector:function refresh_selector(){var c=a(this),d=c.attr("id").replace(),e="rootcategory="+h+"&categoryid="+d+"&quizzeslist="+f,g=b.wwwroot+"/blocks/userquiz_monitor/ajax/refreshselector.php?"+e;a.get(g,function(b){a(".selectorcontainers").html(b);if(a("#id-selector-nb-questions").length){a("#id-training-go-button").prop("disabled",!1)}else{a("#id-training-go-button").prop("disabled",!0)}},"html")},select_all_master_categories:function select_all_master_categories(){if(a("#checkall-master").prop("checked")){a(".cb-master").prop("checked",!0)}else{a(".cb-master").prop("checked",!1)}i.update_selector_master_global()},select_all_detail_categories:function select_all_detail_categories(){var b=a(this),c=b.attr("id").replace("id-checkall-detail-","");if(b.prop("checked")){a(".cb-detail-"+c).prop("checked",!0)}else{a(".cb-detail-"+c).prop("checked",!1)}var d=a.proxy(i.update_selector_detail,this);d()},reset_training:function reset_training(c){var e="id="+d+"&userid="+c+"&quizzeslist="+f,g=b.wwwroot+"/blocks/userquiz_monitor/ajax/resettraining.php?"+e;a.get(g,function(a){alert(a);window.location=b.wwwroot+"/course/view.php?id="+d},"html")},refresh_content:function refresh_content(){var c=a(this),e=c.attr("id").replace("",""),f="courseid="+d+"&rootcategory="+h+"&id="+e,g=b.wwwroot+"/blocks/userquiz_monitor/ajax/schedulecontent.php?"+f;a.get(g,function(b){a("#divschedule").html(b);this.highlight_amf_cat(e)})},highlight_training_cat:function highlight_training_cat(b){a("trainingcat").removeClass("active");a("trainingcat").addClass("inactive");for(var c=0;12>c;c++){if(c===b){a("#trainingcat"+c).removeClass("inactive");a("#trainingcat"+c).addClass("active")}}},close_detail:function close_detail(){var b=a(this),c=b.attr("id").replace("id-cancel-detail-","");a("#checkall-master").prop("checked",!1);a("#checkall-master").prop("disabled",!1);a(".cb-master").prop("checked",!1);a(".cb-master").prop("disabled",!1);a(".cb-master").addClass("trans100");a(".cb-master").removeClass("trans50");a("#id-detail-button-div-"+c).addClass("active");a(".progressbar-container").css("visibility","visible");a(".category-subpod").css("display","none");a("#category-subcatpod-"+c).html("");a(".cb-master").prop("disabled",!1);a(".div-main").removeClass("trans50");a(".div-main").addClass("trans100");var d=a.proxy(i.update_selector_detail,this);d()},fetch_training_subcategories:function fetch_training_subcategories(){var g=a(this),j=g.attr("id").replace("details-button-div-",""),k="blockid="+e+"&courseid="+d+"&rootcategory="+h;k+="&categoryid="+j+"&quizzeslist="+f+"&mode=training";var l=b.wwwroot+"/blocks/userquiz_monitor/ajax/subcategoriescontent.php?"+k;a.post(l,"",function(b){var d;if(isNaN(j)){d=j.replace("details-button-","")}else{d=j}a(".category-subpod").css("display","none");a("#category-subcatpod-"+j).html("");a("#category-subcatpod-"+d).html(b);a("#category-subcatpod-"+d).css("display","inline-block");c.debug("AMD Block_userquiz_monitor detail "+d+" loaded");a("#id-checkall-detail-"+j).prop("checked",!1);a("#id-checkall-detail-"+j).bind("change",i.select_all_detail_categories);if(!a("#id-cb-master-"+j).prop("checked")){a("#id-checkall-detail-"+j).prop("checked",!1);a(".cb-detail-"+j).prop("checked",!1)}else{a("#id-checkall-detail-"+j).prop("checked",!0);a(".cb-detail-"+j).prop("checked",!0)}a(".cb-detail-"+j).bind("click",i.update_selector_detail);a("#id-cancel-detail-"+j).bind("click",i.close_detail);a("#id-detail-button-div-"+j).removeClass("active");a(".cb-master").prop("disabled",!0);a(".cb-master").prop("checked",!1);a(".div-main").addClass("trans50");a(".div-main").removeClass("trans100");a("#cb-master-"+j).prop("disabled",!1);a("#id-div-main-"+j).removeClass("trans50");a("#id-div-main-"+j).addClass("trans100");a("html,body").animate({scrollTop:a("#id-cat-"+j).offset().top},"slow");var e=a.proxy(i.update_selector_detail,this);e()},"html")},fetch_exam_subcategories:function fetch_exam_subcategories(){var f=a(this),j=f.attr("id").replace("details-button-div-",""),k="blockid="+e+"&courseid="+d+"&rootcategory="+h;k+="&categoryid="+j+"&quizzeslist="+g+"&mode=exam";var l=b.wwwroot+"/blocks/userquiz_monitor/ajax/subcategoriescontent.php?"+k;a.post(l,"",function(b){var d;if(isNaN(j)){d=j.replace("details-button-","")}else{d=j}a(".category-subpod").css("display","none");a("#category-subcatpod-"+j).html("");a("#category-subcatpod-"+d).html(b);a("#category-subcatpod-"+d).css("display","inline-block");c.debug("AMD Block_userquiz_monitor detail "+d+" loaded");a("#id-cancel-detail-"+j).bind("click",i.close_detail);a("#id-detail-button-div-"+j).removeClass("active");a(".div-main").addClass("trans50");a(".div-main").removeClass("trans100");a("#id-div-main-"+j).removeClass("trans50");a("#id-div-main-"+j).addClass("trans100");a("html,body").animate({scrollTop:a("#id-cat-"+j).offset().top},"slow")},"html")}};return i});
//# sourceMappingURL=training.min.js.map
