define("block_userquiz_monitor/training",["jquery","core/config","core/log"],(function($,cfg,log){var courseid,blockid,quizlist,examquiz,rootcategory,training={init:function(cid,bid,rc,ql,exq){courseid=cid,blockid=bid,rootcategory=rc,quizlist=ql,examquiz=exq,$(".cb-master").prop("disabled",!1),$(".cb-master").prop("checked",!1),$("#checkall-master").prop("disabled",!1),$("#checkall-master").prop("checked",!1),$("#checkall-master").bind("change",this.select_all_master_categories),$(".cb-master").bind("click",this.update_selector_master_global),$(".userquiz-monitor-cat-button").bind("click",this.fetch_training_subcategories),$(".userquiz-monitor-cat-button").addClass("active"),$(".userquiz-monitor-exam-cat-button").bind("click",this.fetch_exam_subcategories),$(".userquiz-monitor-exam-cat-button").addClass("active"),log.debug("AMD Block_userquiz_monitor quizforceanswer initialized")},init_detail:function(){var categoryid=$(this).attr("id").match(/[^0-9]*([0-9]+)$/)[1];$("#id-checkall-detail-"+categoryid).prop("checked",!1),$("#id-checkall-detail-"+categoryid).bind("change",this.select_all_detail_categories),$(".cb-detail-"+categoryid).prop("checked",!1),$(".cb-detail-"+categoryid).bind("click",this.update_selector_detail),log.debug("AMD Block_userquiz_monitor detail "+categoryid+" initialized")},update_selector_master_ajax:function(){var that=$(this),categoryid=parseInt(that.attr("id").replace("id-cb-master-",""));categoryid||(categoryid=parseInt(that.attr("id").replace("details-button-","")));var params="courseid="+courseid+"&rootcategory="+rootcategory+"&categoryid="+categoryid;params+="&location=mode0&quizlist="+quizlist;var url=M.cfg.wwwroot+"/blocks/userquiz_monitor/ajax/updateselector.php?"+params;that.prop("checked")&&$(".cb-detail-"+categoryid).prop("checked",!0),$.get(url,(function(data){$(".selectorcontainers").html(data),$("#id-selector-nb-questions").length?$("#id-training-go-button").prop("disabled",!1):$("#id-training-go-button").prop("disabled",!0)}),"html")},update_selector_master_global:function(mode){var categorieslist="";"all"===mode&&this.select_all_master_cb(),$(".cb-master").each((function(){if($(this).prop("checked")){var catid=$(this).attr("id").replace("id-cb-master-","");categorieslist=""===categorieslist?catid:categorieslist+","+catid}})),""===categorieslist&&(categorieslist="null");var params="courseid="+courseid+"&rootcategory="+rootcategory+"&categoryid="+categorieslist;params+="&location=mode0&quizlist="+quizlist;var url=M.cfg.wwwroot+"/blocks/userquiz_monitor/ajax/updateselector.php?"+params;$.get(url,(function(data){$(".selectorcontainers").html(data),$("#id-selector-nb-questions").length?$("#id-training-go-button").prop("disabled",!1):$("#id-training-go-button").prop("disabled",!0)}),"html")},update_selector_detail:function(){var that=$(this);log.debug("update_selector_detail "+that.attr("id"));var categorieslist="",allchecked=!0,parentid=0,currentclasses=that.attr("class").split(" ");for(var i in currentclasses)currentclasses[i].match(/^cb-detail-/)&&(parentid=currentclasses[i].replace("cb-detail-",""));$(".cb-detail").each((function(){var categoryid=$(this).attr("id").replace("id-cb-detail-","");$(this).prop("checked")?categorieslist=""===categorieslist?categoryid:categorieslist+","+categoryid:allchecked=!1})),!allchecked&&parentid&&$("#id-cb-master-"+parentid).prop("checked",!1),""===categorieslist&&(categorieslist="null");var params="courseid="+courseid+"&rootcategory="+rootcategory+"&categoryid="+categorieslist;params+="&location=mode1&quizlist="+quizlist;var url=cfg.wwwroot+"/blocks/userquiz_monitor/ajax/updateselector.php?"+params;$.get(url,(function(data){$(".selectorcontainers").html(data),$("#id-selector-nb-questions").length?$("#id-training-go-button").prop("disabled",!1):$("#id-training-go-button").prop("disabled",!0)}),"html")},refresh_selector:function(){var categoryid=$(this).attr("id").replace(),params="rootcategory="+rootcategory+"&categoryid="+categoryid+"&quizzeslist="+quizlist,url=cfg.wwwroot+"/blocks/userquiz_monitor/ajax/refreshselector.php?"+params;$.get(url,(function(data){$(".selectorcontainers").html(data),$("#id-selector-nb-questions").length?$("#id-training-go-button").prop("disabled",!1):$("#id-training-go-button").prop("disabled",!0)}),"html")},select_all_master_categories:function(){$("#checkall-master").prop("checked")?$(".cb-master").prop("checked",!0):$(".cb-master").prop("checked",!1),training.update_selector_master_global()},select_all_detail_categories:function(){var that=$(this),categoryid=that.attr("id").replace("id-checkall-detail-","");that.prop("checked")?$(".cb-detail-"+categoryid).prop("checked",!0):$(".cb-detail-"+categoryid).prop("checked",!1),$.proxy(training.update_selector_detail,this)()},reset_training:function(userid){var params="id="+courseid+"&userid="+userid+"&quizzeslist="+quizlist,url=cfg.wwwroot+"/blocks/userquiz_monitor/ajax/resettraining.php?"+params;$.get(url,(function(data){alert(data),window.location=cfg.wwwroot+"/course/view.php?id="+courseid}),"html")},refresh_content:function(){var categoryid=$(this).attr("id").replace("",""),params="courseid="+courseid+"&rootcategory="+rootcategory+"&id="+categoryid,url=cfg.wwwroot+"/blocks/userquiz_monitor/ajax/schedulecontent.php?"+params;$.get(url,(function(data){$("#divschedule").html(data),this.highlight_amf_cat(categoryid)}))},highlight_training_cat:function(categoryid){$("trainingcat").removeClass("active"),$("trainingcat").addClass("inactive");for(var i=0;i<12;i++)i===categoryid&&($("#trainingcat"+i).removeClass("inactive"),$("#trainingcat"+i).addClass("active"))},close_detail:function(){var categoryid=$(this).attr("id").replace("id-cancel-detail-","");$("#checkall-master").prop("checked",!1),$("#checkall-master").prop("disabled",!1),$(".cb-master").prop("checked",!1),$(".cb-master").prop("disabled",!1),$(".cb-master").addClass("trans100"),$(".cb-master").removeClass("trans50"),$("#id-detail-button-div-"+categoryid).addClass("active"),$(".progressbar-container").css("visibility","visible"),$(".category-subpod").css("display","none"),$("#category-subcatpod-"+categoryid).html(""),$(".cb-master").prop("disabled",!1),$(".div-main").removeClass("trans50"),$(".div-main").addClass("trans100"),$.proxy(training.update_selector_detail,this)()},fetch_training_subcategories:function(){var categoryid=$(this).attr("id").replace("details-button-div-",""),params="blockid="+blockid+"&courseid="+courseid+"&rootcategory="+rootcategory;params+="&categoryid="+categoryid+"&quizzeslist="+quizlist+"&mode=training";var url=cfg.wwwroot+"/blocks/userquiz_monitor/ajax/subcategoriescontent.php?"+params;$.post(url,"",(function(data){var localcatid;localcatid=isNaN(categoryid)?categoryid.replace("details-button-",""):categoryid,$(".category-subpod").css("display","none"),$("#category-subcatpod-"+categoryid).html(""),$("#category-subcatpod-"+localcatid).html(data),$("#category-subcatpod-"+localcatid).css("display","inline-block"),log.debug("AMD Block_userquiz_monitor detail "+localcatid+" loaded"),$("#id-checkall-detail-"+categoryid).prop("checked",!1),$("#id-checkall-detail-"+categoryid).bind("change",training.select_all_detail_categories),$("#id-cb-master-"+categoryid).prop("checked")?($("#id-checkall-detail-"+categoryid).prop("checked",!0),$(".cb-detail-"+categoryid).prop("checked",!0)):($("#id-checkall-detail-"+categoryid).prop("checked",!1),$(".cb-detail-"+categoryid).prop("checked",!1)),$(".cb-detail-"+categoryid).bind("click",training.update_selector_detail),$("#id-cancel-detail-"+categoryid).bind("click",training.close_detail),$("#id-detail-button-div-"+categoryid).removeClass("active"),$(".cb-master").prop("disabled",!0),$(".cb-master").prop("checked",!1),$(".div-main").addClass("trans50"),$(".div-main").removeClass("trans100"),$("#cb-master-"+categoryid).prop("disabled",!1),$("#id-div-main-"+categoryid).removeClass("trans50"),$("#id-div-main-"+categoryid).addClass("trans100"),$("html,body").animate({scrollTop:$("#id-cat-"+categoryid).offset().top},"slow"),$.proxy(training.update_selector_detail,this)()}),"html")},fetch_exam_subcategories:function(){var categoryid=$(this).attr("id").replace("details-button-div-",""),params="blockid="+blockid+"&courseid="+courseid+"&rootcategory="+rootcategory;params+="&categoryid="+categoryid+"&quizzeslist="+examquiz+"&mode=exam";var url=cfg.wwwroot+"/blocks/userquiz_monitor/ajax/subcategoriescontent.php?"+params;$.post(url,"",(function(data){var localcatid;localcatid=isNaN(categoryid)?categoryid.replace("details-button-",""):categoryid,$(".category-subpod").css("display","none"),$("#category-subcatpod-"+categoryid).html(""),$("#category-subcatpod-"+localcatid).html(data),$("#category-subcatpod-"+localcatid).css("display","inline-block"),log.debug("AMD Block_userquiz_monitor detail "+localcatid+" loaded"),$("#id-cancel-detail-"+categoryid).bind("click",training.close_detail),$("#id-detail-button-div-"+categoryid).removeClass("active"),$(".div-main").addClass("trans50"),$(".div-main").removeClass("trans100"),$("#id-div-main-"+categoryid).removeClass("trans50"),$("#id-div-main-"+categoryid).addClass("trans100"),$("html,body").animate({scrollTop:$("#id-cat-"+categoryid).offset().top},"slow")}),"html")}};return training}));

//# sourceMappingURL=training.min.js.map